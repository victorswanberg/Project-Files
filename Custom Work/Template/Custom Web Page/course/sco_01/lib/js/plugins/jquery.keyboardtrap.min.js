
(function($,window,document,undefined){var pluginName='jquery-keyboard-trap';var trapTemplate='<div tabindex="0" class="keyboard-trap-boundary">';var $topTrap=$(trapTemplate);var $outerTrapBefore=$(trapTemplate);var $innerTrapBefore=$(trapTemplate);var $innerTrapAfter=$(trapTemplate);var $outerTrapAfter=$(trapTemplate);var $botTrap=$(trapTemplate);var $trap;var $firstTabElement;var $lastTabElement;$topTrap.on('focus',setFocusToFirstFocusableElement);$outerTrapBefore.on('focus',setFocusToFirstFocusableElement);$innerTrapBefore.on('focus',setFocusToLastFocusableElement);$innerTrapAfter.on('focus',setFocusToFirstFocusableElement);$outerTrapAfter.on('focus',setFocusToLastFocusableElement);$botTrap.on('focus',setFocusToLastFocusableElement);function setFocusToFirstFocusableElement(){$firstTabElement.focus();}
function setFocusToLastFocusableElement(){$lastTabElement.focus();}
$.trapKeyboard=function trapKeyboard(el){var $focusable;$.untrapKeyboard();$trap=$(el);$focusable=$trap.focusable();$firstTabElement=$focusable.first();$lastTabElement=$focusable.last();$('body').prepend($topTrap);$outerTrapBefore.insertBefore($trap);$trap.prepend($innerTrapBefore);$trap.append($innerTrapAfter);$outerTrapAfter.insertAfter($trap);$('body').append($botTrap);$trap.addClass('keyboard-trap--active');$trap.trigger('keyboardTrap');return $trap;};$.untrapKeyboard=function untrapKeyboard(){if($trap!==undefined){$topTrap.detach();$outerTrapBefore.detach();$innerTrapBefore.detach();$innerTrapAfter.detach();$outerTrapAfter.detach();$botTrap.detach();$trap.off('focusExit');$trap.removeClass('keyboard-trap--active');$trap.trigger('keyboardUntrap');}
return $trap;};}(jQuery,window,document));